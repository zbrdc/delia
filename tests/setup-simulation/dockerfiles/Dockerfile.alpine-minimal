# Simulates minimal Alpine environment
# Tests: Edge cases with musl libc, missing common tools
FROM alpine:3.20

RUN apk add --no-cache sudo curl git bash shadow && \
    adduser -D -s /bin/bash testuser && \
    echo "testuser ALL=(ALL) NOPASSWD:ALL" >> /etc/sudoers

USER testuser
WORKDIR /home/testuser

COPY --chown=testuser:testuser . /home/testuser/delia

ENV PATH="/home/testuser/.local/bin:$PATH"
SHELL ["/bin/bash", "-c"]
